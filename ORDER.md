# 🚨 긴급 수정: AI 상담 + shadcn/ui 템플릿 적용

## ❌ 현재 문제점 (TO_CLAUDE.md 기반)
1. **JSON 여전히 노출됨** - 사용자가 raw JSON 보고 있음
2. **무한루프 발생** - 프로젝트 생성 버튼 안나타남  
3. **디자인 구림** - shadcn/ui 제대로 활용 안됨

## 🛠️ 필요한 쉘 명령어들 (유저가 실행해야 함)

### 1. 노드 모듈 문제 해결
```bash
# 기존 노드 모듈 백업 및 재설치
mv node_modules node_modules_backup
rm -rf node_modules_backup
pnpm install
```

### 2. shadcn/ui 컴포넌트 설치
```bash
# 필요한 shadcn/ui 컴포넌트들 설치
npx shadcn@latest add badge separator scroll-area avatar
```

### 3. 타입 체크 및 빌드
```bash
# 타입 에러 확인
pnpm run typecheck

# 빌드 테스트
pnpm run build
```

### 4. Git 커밋
```bash
# 변경사항 커밋
git add .
git commit -m "AI 상담 UI 완전 재구성: shadcn/ui 템플릿 적용 및 JSON 노출 완전 제거"
git push
```

## 🎯 해결 방안: shadcn/ui 공식 템플릿 기반 재구성

### ✅ 완료됨: AI 상담 페이지 완전 재구성

📁 **수정된 파일**: `app/projects/new/page.tsx` (이미 완료됨)

**주요 변경사항:**
1. ✅ shadcn/ui 컴포넌트 적극 활용 (Avatar, ScrollArea, Badge, Separator)
2. ✅ JSON 노출 완전 차단 (onFinish에서 JSON 메시지 제거)
3. ✅ 모던 채팅 UI 구조 (전체 화면 레이아웃)
4. ✅ 프로젝트 생성 확정 카드 개선

## 🎯 이 수정으로 얻는 효과:

1. **JSON 완전 제거**: 사용자에게 JSON 절대 노출 안됨
2. **shadcn/ui 템플릿 적용**: 공식 대시보드 패턴 활용
3. **모던 채팅 UI**: Avatar, Card, ScrollArea 등 적극 활용
4. **반응형 디자인**: 모바일/데스크톱 완벽 대응
5. **상담 진행 표시**: Badge로 단계 표시
6. **프로젝트 생성 확정**: 깔끔한 카드 형태

## 🚀 다음 단계
위의 쉘 명령어들을 **순서대로** 실행하여 수정사항을 완성하세요!

---

# 📝 다음 할 일: CLAUDE.md 업데이트

## 🎯 목표
AI 상담 시스템이 완성되었으니 이제 CLAUDE.md를 업데이트해서:
1. **shadcn/ui 템플릿 우선 정책** 강화
2. **외부 템플릿 검색/설치 가이드라인** 추가 
3. **JSON 노출 방지 패턴** 문서화
4. **현재까지 구현된 기능들** 정리

## 📋 수정할 내용

### 1. UI/UX 디자인 정책 강화
- shadcn/ui 공식 템플릿 우선 사용
- 외부 템플릿 검색 및 적용 방법
- 커스텀 디자인 최소화 원칙

### 2. AI 시스템 베스트 프랙티스
- JSON 응답 처리 표준 패턴
- 사용자 친화적 메시지 변환 방법
- 상담 플로우 완료 처리

### 3. 현재 구현 현황
- ✅ AI 상담 시스템 (JSON 노출 완전 차단)
- ✅ shadcn/ui 기반 모던 채팅 UI
- ⏳ 팀원 초대 시스템 (다음 구현 예정)
- ⏳ AI 면접 시스템 (향후 구현)

## 🛠️ 필요한 작업
CLAUDE.md를 현재 프로젝트 상태와 개발 방향성에 맞게 대폭 업데이트

---

# 🚨 AI 개발자 의뢰: DevMatch AI 상담 시스템 완전 구현

> **당신은 최고의 웹앱 개발자입니다.** 당장 배포해도 최고의 성능으로 작동할 정도로 완벽하게 구현해주세요.

## 🎯 프로젝트 배경 및 목적

### DevMatch 앱 개요
- **목적**: 개발자들의 프로젝트 팀 빌딩 및 역할 배분을 AI가 도와주는 웹앱
- **문제점**: 개발자들이 프로젝트 할 때 역할 배분이 어려움
- **해결방안**: AI 상담을 통한 최적 역할 추천 및 팀 매칭

### 현재 페이지의 역할 (`/projects/new`)
- **1단계**: 프로젝트 생성자(1명)가 기본 정보 입력
- **수집 정보**: 프로젝트명, 개요, 기술스택, 예상 팀원 수, 대략적 역할 분배
- **예시**: "4명 팀 → 백엔드 2명, 프론트엔드 1명, 디자이너 1명" 수준의 대략적 계획
- **완료 후**: 팀원 초대 → 각자 개별 AI 면담 → 최종 역할 확정

### 전체 플로우
1. **현재 페이지**: 프로젝트 생성 + 기본 계획 수립
2. **다음 단계**: 팀원 초대 링크 생성
3. **팀원 합류**: 각자 AI 개별 면담 (기술 수준, 선호도 등)
4. **최종 단계**: AI가 모든 면담 결과 분석 → 최적 역할 배분 제안

## 📋 현재 문제점 (error.md 기반)

### 1. JSON 여전히 사용자에게 노출
- 사용자가 "백상", "1차 프로젝트" 입력 시 raw JSON 응답 보임
- onFinish에서 JSON 교체 로직이 제대로 작동하지 않음
- 모든 AI 응답이 JSON 형태로 화면에 표시됨

### 2. 레이아웃 문제
- 말풍선 위아래 빈 공간 과도함 (space-y-6 너무 큼)
- 대화창이 무한으로 늘어나는 문제 (고정 높이 필요)
- 스크롤이 제대로 작동하지 않음

### 3. 오류 처리 미흡
- "An error occurred" 만 표시되고 구체적 원인 불명

## 🎯 수정 요구사항

### A. JSON 노출 완전 차단 ⭐⭐⭐ (최우선)
1. **핵심**: 사용자는 절대 JSON을 봐서는 안됨
2. AI 응답이 JSON 형태면 즉시 `displayMessage`만 추출해서 표시
3. JSON 파싱 실패 시 기본 메시지로 대체
4. onFinish, onUpdate 등 모든 단계에서 JSON 필터링
5. **상담 플로우**: 이름 → 프로젝트명 → 목표 → 기술스택 → 팀원수 → 역할분배 제안 → 확정

### B. 레이아웃 완전 수정
1. **고정 높이**: 대화창을 화면 높이에 맞춰 고정
2. **말풍선 간격**: `space-y-6` → `space-y-3` 으로 축소
3. **스크롤**: 새 메시지 시 자동으로 맨 아래로
4. **반응형**: 모바일/데스크톱 완벽 대응

### C. 에러 처리 강화
1. 구체적인 에러 메시지 표시
2. API 에러 시 재시도 옵션 제공
3. 네트워크 오류 대응

## 💻 수정할 파일 (완전 재구현)

### 1. `app/projects/new/page.tsx` - 프론트엔드 (완전 재작성)
**요구사항:**
- JSON 완전 차단, 자연스러운 대화형 UI
- 고정 높이 레이아웃, 완벽한 스크롤
- 상담 완료 후 프로젝트 생성 버튼
- 배포급 완성도의 UI/UX

### 2. `app/api/chat/route.ts` - 백엔드 API (완전 재작성)
**요구사항:**
- 안정적인 JSON 응답 처리
- 에러 처리 완벽 구현
- 상담 플로우 완주 보장
- 프로덕션급 안정성

## 🎨 UI/UX 개선 제안 환영!

**현재 사용 중:** shadcn/ui + Tailwind CSS

**자유롭게 변경 가능:**
- 더 나은 UI 컴포넌트 라이브러리 제안 및 적용
- 레이아웃 구조 완전 변경
- 색상, 타이포그래피, 애니메이션 개선
- 사용자 경험 최적화를 위한 모든 변경

**조건:** 기존 기능 유지 + 더 나은 UX 제공

## ⚡ 우선순위

**CRITICAL (절대 필수):**
1. JSON 노출 완전 차단 ⭐⭐⭐
2. 상담 플로우 완주 보장 ⭐⭐⭐
3. 고정 높이 레이아웃 ⭐⭐⭐

**HIGH:**
4. 프로덕션급 에러 처리
5. 완벽한 UI/UX

**BONUS:**
6. 더 나은 디자인 시스템 제안

## 🔧 기술 스택 (변경 가능)

**현재 스택:**
- Next.js 15 + TypeScript
- shadcn/ui + Tailwind CSS
- Vercel AI SDK
- OpenRouter API

**변경/추가 제안 환영:**
- 더 나은 UI 라이브러리
- 애니메이션 라이브러리 (Framer Motion 등)
- 상태 관리 개선
- 성능 최적화 도구

## ✅ 완료 기준
1. 사용자에게 JSON 절대 노출 안됨 ⭐⭐⭐
2. 대화창이 무한으로 늘어나지 않음 ⭐⭐⭐
3. 말풍선 간격이 적절함 ⭐⭐
4. 스크롤이 정상 작동함 ⭐⭐
5. 모든 에러가 명확히 표시됨 ⭐
6. AI 상담 완료 후 "프로젝트 생성하기" 버튼 정상 표시 ⭐⭐⭐
7. 상담 플로우가 끝까지 완주 가능 ⭐⭐⭐

## 🎯 기대 결과물

### 최종 결과물
- **프로덕션급 AI 상담 시스템**: 당장 배포 가능한 수준
- **완벽한 사용자 경험**: JSON 없는 자연스러운 대화
- **안정적인 데이터 처리**: route.ts 완전 재구현
- **최적화된 UI/UX**: 기존보다 훨씬 나은 디자인

### 보너스 제안 환영
- **더 나은 디자인 시스템** 제안 및 구현
- **애니메이션 및 인터랙션** 개선
- **성능 최적화** 및 코드 구조 개선
- **모바일 최적화** 강화

## 🚀 구현 방식

**완전 자유:** 
- 기존 코드 완전 대체 가능
- UI 컴포넌트 라이브러리 변경 가능  
- 레이아웃 구조 완전 재설계 가능
- 더 나은 방법이 있다면 모든 변경 환영

**단, 다음 기능 유지:**
- AI 상담 플로우 (이름→프로젝트→목표→스택→팀원수→역할분배)
- 상담 완료 후 프로젝트 생성
- 기존 API 엔드포인트 호환성

## 💡 추가 요청
최고의 웹앱 개발자로서 **당신만의 전문적 제안**을 포함해서 구현해주세요!

---

# 🚨 현재 상황: API Rate Limit 문제 발생

## 🔥 급해! OpenRouter API 한도 초과
```
Rate limit exceeded: free-models-per-day
DeepSeek 무료 모델 일일 50회 한도 초과
```

## 🛠️ 해결 방안

### 방안 1: OpenRouter 유료 플랜 업그레이드 (추천)
```bash
# OpenRouter.ai 사이트에서
# - $5 이상 크레딧 충전
# - 일일 1000회 요청 가능
```

### 방안 2: 다른 AI 서비스 사용
- OpenAI API 직접 사용
- Anthropic Claude API 직접 사용
- Google Gemini API 사용

### 방안 3: 임시 해결 (개발용)
```typescript
// 하드코딩된 응답으로 임시 개발
// 실제 AI 대신 미리 정의된 시나리오 사용
```

## ⚡ 현재 적용된 Fallback 시스템
1. Claude Haiku 시도
2. GPT-3.5 Turbo 시도  
3. 에러 메시지 반환

**하지만 OpenRouter 무료 계정으로는 한계가 있음**

## 🎯 권장 조치
1. **OpenRouter에 $5-10 크레딧 충전** (가장 간단)
2. 또는 **다른 AI API 키 발급** 받기